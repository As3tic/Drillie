<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://kit.fontawesome.com/2ffa0d5e9f.js" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drillie</title>
    <style>
body {
    margin: 0;
    line-height: normal;
  }
.main{
    background-color: #272829;
    width: 100vw;
    height: 100vh;
    margin: 0;
}
.chatty{
    margin: 0;
    padding: 25px;
    color: #FFF6E0;
    text-align: center;
}
.chat-container{
    background-color: #D8D9DA;
    flex-direction: column;
    display: flex;
    width: 80%;
    height: 100%;
    right: 0;
    position: absolute;
}
.sidebar{
    width: 20%;
    height: 100%;
    left:0;
    position: absolute;
}
#messages{
    width: 100%;
    height: 70%;

}

form{
    margin-top: 10px;
}
.custom-input {
  width: 791px;
  height: 40px;
  border-radius: 42px;
  border: #FFFFFF;
  /*border: 1px solid #272829;  You mentioned border, so I added a border here */
  color: #272829; /* Font color */
  background-color: #FFFFFF; /* Background color */
  font-size: 16px; /* You can adjust the font size as needed */
  padding: 10px; /* Add padding to the text input for better appearance */
}
.roundy{
    border: #FFFFFF;
    border-radius: 100px;
    width:50px;
    height:50px;  
    background-color: #FFFFFF;
    margin-left: 10px;
}
   </style>
</head>
<body>

<div class="main">
    <div class="sidebar">
        <h2 class="chatty" style="font-size: 42px;">Chat History</h2>
    </div>

    <div class="chat-container">
        <h2 class="chatty" style="color: #272829; font-size: 68px;">Drillie 1.0</h2>

        <div id="messages">
            <!-- Messages will be added here -->
        </div>

       <center>
        <form id="input_bot">
            <input type="text" id="question" placeholder="Enter your query" class="custom-input">
            <button type="submit"  class="roundy"><i class="fa-solid fa-arrow-right fa-2xl" style="color: #272829;"></i></button>
        </form>
       </center>
    </div>

</div>
</body>

<script>
   $(document).ready(function () {
    $("#input_bot").submit(function (event) { // Changed the ID here
        event.preventDefault();
        var question = $("#question").val();
        addMessage("User", question, true);
        $.ajax({
            type: "POST",
            url: "/ask",
            data: { question: question },
            success: function (data) {
                var answer = data.answer;
                addMessage("Chatbot", answer, false);
                $("#question").val(""); // Clear the input field
            },
        });
    });

    function addMessage(sender, message, isUser) {
        var messageDiv = $("<div class='message-container'></div>");
        var messageBox = $("<div class='message-box'></div>");
        messageBox.text(message);

        if (isUser) {
            messageDiv.addClass("user");
            messageBox.addClass("user");
        }

        messageDiv.append(messageBox);
        $("#messages").append(messageDiv); // Changed the ID here
        scrollToBottom();
    }

    // Function scrollToBottom() implementation if needed.
});

</script>
</html>
